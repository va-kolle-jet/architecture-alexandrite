# Планируемый скоуп логов уровня INFO:
- CRUD события по работе с заказом(включая статусы заказа)
- события отправки и получения данных расчета стоимости заказа
- административные действия пользователей
Все логи будут созданы по паттерну {время лога} {название потока} {название класса} {описание действия} {сообщение лога(номер заказа, статус заказа, id пользователя)}

Другие логи будут использоваться:
    TRACE - низкоуровневое логирование деталей запросов
    DEBUG - детальное описание параметров выполнения методов
    WARN - потенциально опасные ситуации, которые требуют некоторого внимания со стороны поддержки
    ERROR - ошибки вызванные системой, для дальнейшего их анализа и устранения

# Мотивация
- получение контекста выполнения того или иного метода значительно сокращает время на анализ и воспроизведения ошибки
- позволяет четко понимать что все идет как и задумано(если в логах нет ошибок)
- подсвечивает ситуации, на которые система или готова или нет

В первую очередь логирование требуется добавлять в наименее стабильные части системы. На текущий момент это: CRM, MES, онлайн-магазин. По хорошему логирование нужно вести во всех частях системы.

# Предлагаемое решение
Для логирования будет использоваться стек ELK (Elasticsearch, Logstash, Kibana). Каждый сервис (онлайн магазин, MES, CRM) будет отправлять логи в Logstash, где логи будут обрабатываться и отправляться в Elasticsearch. Для визуализации и анализа логов будет использоваться Kibana.
Существует несколько основных правил по ведению логирования:
- доступ к системе логирования может быть только у определенной группы сотрудников компании
- запрещается отправлять чуствительные данные в открытом виде
- запрещается отправлять в лог значительные по обьему данные(например, вставлять в лог байт код из файлов)
- нужно настроить ротацию логов по глубине хранения(например, 2 недели)

![С4 diagram](jewerly_c4_model.drawio)
На C4-схеме добавлен компонент ELK-стека. Добавлены связи от всех сервисов (онлайн магазин, MES, CRM) к Logstash

# Мероприятия для превращения системы сбора логов в систему анализа логов
## Подключение алертинга при:
- аномальном количестве логов лбого уровня логирования
- длительное отсутствие логов от сервиса системы


